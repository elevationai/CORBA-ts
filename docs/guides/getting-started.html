<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started - CORBA.ts Documentation</title>
    <meta
      name="description"
      content="Get started with CORBA.ts - Learn how to install, configure, and create your first distributed application"
    >
    <link rel="stylesheet" href="../assets/css/main.css">
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âš¡</text></svg>"
    >
  </head>
  <body>
    <header class="header">
      <div class="container">
        <nav class="nav">
          <a href="../" class="logo">
            <span class="logo-icon"></span>
            CORBA.ts
          </a>
          <ul class="nav-links">
            <li><a href="../">Home</a></li>
            <li><a href="./" class="active">Guides</a></li>
            <li><a href="../api/">API Reference</a></li>
            <li><a href="../examples/">Examples</a></li>
            <li><a href="https://github.com/elevationai/CORBA-ts" target="_blank">GitHub</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container mt-2">
      <div class="grid-2">
        <aside class="doc-nav">
          <h3>Guides</h3>
          <ul>
            <li><a href="getting-started.html" class="active">Getting Started</a></li>
            <li><a href="orb.html">Object Request Broker (ORB)</a></li>
            <li><a href="poa.html">Portable Object Adapter (POA)</a></li>
            <li><a href="naming-service.html">Naming Service</a></li>
            <li><a href="idl-mapping.html">IDL Mapping</a></li>
            <li><a href="giop-iiop.html">GIOP/IIOP Protocols</a></li>
            <li><a href="typecode.html">TypeCode System</a></li>
            <li><a href="value-types.html">Value Types</a></li>
            <li><a href="dii.html">Dynamic Invocation Interface</a></li>
            <li><a href="deployment.html">Deployment Guide</a></li>
          </ul>

          <h4>On This Page</h4>
          <ul>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#first-server">Creating a Server</a></li>
            <li><a href="#first-client">Creating a Client</a></li>
            <li><a href="#running">Running the Application</a></li>
            <li><a href="#next-steps">Next Steps</a></li>
          </ul>
        </aside>

        <article class="panel">
          <h1>Getting Started with CORBA.ts</h1>
          <p>
            This guide will help you set up CORBA.ts and create your first distributed application. By the end of this
            tutorial, you'll have a working CORBA server and client communicating over the network.
          </p>

          <div
            class="panel mt-2"
            style="background: rgba(100, 255, 218, 0.05); border-left: 4px solid var(--primary-cyan)"
          >
            <h3>Prerequisites</h3>
            <ul>
              <li>
                <strong>Deno 1.37+</strong> - <a
                  href="https://deno.land/manual/getting_started/installation"
                  target="_blank"
                >Install Deno</a>
              </li>
              <li><strong>Basic TypeScript knowledge</strong> - Familiarity with TypeScript syntax and concepts</li>
              <li>
                <strong>Network access</strong> - For downloading dependencies and testing client-server communication
              </li>
            </ul>
          </div>

          <h2 id="installation">ğŸ“¦ Installation</h2>
          <p>
            CORBA.ts is available on JSR (JavaScript Registry) and Deno.land. We recommend using JSR for the best
            experience:
          </p>

          <h3>Using JSR (Recommended)</h3>
          <div class="code-block" data-lang="typescript">
            import * as CORBA from "jsr:@eai/corba"; import { Servant } from "jsr:@eai/corba/poa"; import { init,
            ORB_instance, getRootPOA } from "jsr:@eai/corba";
          </div>

          <h3>Using Deno.land</h3>
          <div class="code-block" data-lang="typescript">
            import * as CORBA from "https://deno.land/x/corba_ts/mod.ts"; import { Servant } from
            "https://deno.land/x/corba_ts/src/poa.ts";
          </div>

          <h2 id="first-server">ğŸ–¥ï¸ Creating Your First Server</h2>
          <p>Let's create a simple "Hello World" CORBA server. Create a new file called <code>server.ts</code>:</p>

          <div class="code-block" data-lang="typescript">
            // server.ts import { init, ORB_instance, getRootPOA } from "jsr:@eai/corba"; import { Servant } from
            "jsr:@eai/corba/poa"; // Define the servant class class HelloServant extends Servant { // Every servant must
            have a repository ID _repository_id(): string { return "IDL:Hello:1.0"; } // Our business method
            sayHello(name: string): string { console.log(`Server: sayHello called with name: ${name}`); return `Hello,
            ${name}! Welcome to CORBA.ts`; } // Method to get current server time getServerTime(): string { const now =
            new Date(); console.log(`Server: getServerTime called`); return now.toISOString(); } } async function
            startServer() { try { console.log("ğŸš€ Starting CORBA.ts server..."); // Initialize the CORBA runtime await
            init(); console.log("âœ… CORBA runtime initialized"); // Get the ORB instance const orb = ORB_instance();
            console.log("âœ… ORB instance obtained"); // Get the Root POA and its manager const rootPOA = getRootPOA();
            const poaManager = rootPOA.the_POAManager(); console.log("âœ… Root POA obtained"); // Activate the POA
            Manager await poaManager.activate(); console.log("âœ… POA Manager activated"); // Create the servant const
            servant = new HelloServant(); console.log("âœ… Servant created"); // Activate the servant const oid = await
            rootPOA.activate_object(servant); console.log(`âœ… Servant activated with OID: ${oid}`); // Get the object
            reference const helloRef = await rootPOA.id_to_reference(oid); console.log("âœ… Object reference obtained");
            // Convert to IOR string for clients to use const helloIOR = await orb.object_to_string(helloRef);
            console.log("\nğŸ“‹ Server is ready!"); console.log("ğŸ“‹ Copy this IOR for your client:");
            console.log("=".repeat(50)); console.log(helloIOR); console.log("=".repeat(50)); // Save IOR to file for
            easy client access await Deno.writeTextFile("hello.ior", helloIOR); console.log("ğŸ’¾ IOR saved to
            hello.ior"); console.log("\nğŸƒ Running ORB... Press Ctrl+C to stop"); // Run the ORB (this blocks until
            shutdown) await orb.run(); } catch (error) { console.error("âŒ Server error:", error); Deno.exit(1); } } //
            Handle graceful shutdown Deno.addSignalListener("SIGINT", () => { console.log("\nğŸ›‘ Shutting down
            server..."); Deno.exit(0); }); // Start the server if (import.meta.main) { await startServer(); }
          </div>

          <h2 id="first-client">ğŸ’» Creating Your First Client</h2>
          <p>Now let's create a client that connects to our server. Create a new file called <code>client.ts</code>:</p>

          <div class="code-block" data-lang="typescript">
            // client.ts import { init, ORB_instance } from "jsr:@eai/corba"; // Define the interface for type safety
            interface Hello { sayHello(name: string): Promise&lt;string&gt;; getServerTime(): Promise&lt;string&gt;; }
            async function runClient() { try { console.log("ğŸ”Œ Starting CORBA.ts client..."); // Initialize the CORBA
            runtime await init(); console.log("âœ… CORBA runtime initialized"); // Get the ORB instance const orb =
            ORB_instance(); console.log("âœ… ORB instance obtained"); // Read the IOR from file (created by the server)
            let ior: string; try { ior = await Deno.readTextFile("hello.ior"); console.log("âœ… IOR loaded from
            hello.ior"); } catch (error) { console.error("âŒ Could not read hello.ior file"); console.error(" Make sure
            the server is running and has created the IOR file"); Deno.exit(1); } // Convert IOR string to object
            reference const helloRef = await orb.string_to_object(ior); console.log("âœ… Object reference obtained"); //
            Cast to our Hello interface for type safety const hello = helloRef as unknown as Hello; console.log("\nğŸ“
            Making remote calls..."); // Make some remote method calls const greeting = await hello.sayHello("CORBA.ts
            User"); console.log("ğŸ“¥ Server response:", greeting); const serverTime = await hello.getServerTime();
            console.log("ğŸ“¥ Server time:", serverTime); // Make multiple calls to demonstrate the connection
            console.log("\nğŸ”„ Making multiple calls..."); for (let i = 1; i <= 3; i++) { const response = await
            hello.sayHello(`Client Call #${i}`); console.log(`ğŸ“¥ Call ${i} response:`, response); // Wait a bit between
            calls await new Promise(resolve => setTimeout(resolve, 1000)); } console.log("\nâœ… Client completed
            successfully!"); } catch (error) { console.error("âŒ Client error:", error); if
            (error.message?.includes("Connection refused")) { console.error(" ğŸ’¡ Make sure the server is running"); }
            else if (error.message?.includes("Invalid IOR")) { console.error(" ğŸ’¡ Check that the IOR is valid and the
            server is accessible"); } Deno.exit(1); } } // Run the client if (import.meta.main) { await runClient(); }
          </div>

          <h2 id="running">ğŸƒ Running the Application</h2>

          <h3>Step 1: Start the Server</h3>
          <p>Open a terminal and run the server:</p>
          <div class="code-block" data-lang="bash">
            deno run --allow-net --allow-read --allow-write server.ts
          </div>

          <p>You should see output similar to:</p>
          <div class="code-block" data-lang="text">
            ğŸš€ Starting CORBA.ts server... âœ… CORBA runtime initialized âœ… ORB instance obtained âœ… Root POA obtained âœ…
            POA Manager activated âœ… Servant created âœ… Servant activated with OID: ... âœ… Object reference obtained ğŸ“‹
            Server is ready! ğŸ“‹ Copy this IOR for your client: ==================================================
            IOR:010000002b00000049444c3a48656c6c6f3a312e3000000001000000000000007000000001010200...
            ================================================== ğŸ’¾ IOR saved to hello.ior ğŸƒ Running ORB... Press Ctrl+C
            to stop
          </div>

          <h3>Step 2: Run the Client</h3>
          <p>Open a new terminal (keep the server running) and run the client:</p>
          <div class="code-block" data-lang="bash">
            deno run --allow-net --allow-read client.ts
          </div>

          <p>You should see output like:</p>
          <div class="code-block" data-lang="text">
            ğŸ”Œ Starting CORBA.ts client... âœ… CORBA runtime initialized âœ… ORB instance obtained âœ… IOR loaded from
            hello.ior âœ… Object reference obtained ğŸ“ Making remote calls... ğŸ“¥ Server response: Hello, CORBA.ts User!
            Welcome to CORBA.ts ğŸ“¥ Server time: 2024-01-15T10:30:45.123Z ğŸ”„ Making multiple calls... ğŸ“¥ Call 1 response:
            Hello, Client Call #1! Welcome to CORBA.ts ğŸ“¥ Call 2 response: Hello, Client Call #2! Welcome to CORBA.ts ğŸ“¥
            Call 3 response: Hello, Client Call #3! Welcome to CORBA.ts âœ… Client completed successfully!
          </div>

          <h3>Understanding What Happened</h3>
          <div
            class="panel mt-1"
            style="background: rgba(72, 202, 228, 0.05); border-left: 4px solid var(--secondary-blue)"
          >
            <ol>
              <li>
                <strong>Server Startup</strong>: The server initialized the CORBA runtime, created a servant, and
                activated it in the POA
              </li>
              <li>
                <strong>IOR Generation</strong>: The server generated an IOR (Interoperable Object Reference) containing
                all the information needed to connect to the object
              </li>
              <li>
                <strong>Client Connection</strong>: The client read the IOR, converted it to an object reference, and
                made remote method calls
              </li>
              <li>
                <strong>Network Communication</strong>: All communication happened transparently over GIOP/IIOP
                protocols
              </li>
            </ol>
          </div>

          <h2 id="next-steps">ğŸ¯ Next Steps</h2>

          <div class="grid mt-2">
            <div class="feature-card">
              <h3>ğŸ“š Learn More CORBA</h3>
              <p>Dive deeper into CORBA concepts and CORBA.ts-specific features.</p>
              <ul>
                <li><a href="orb.html">ORB Guide</a> - Understanding the Object Request Broker</li>
                <li><a href="poa.html">POA Guide</a> - Advanced object lifecycle management</li>
                <li><a href="naming-service.html">Naming Service</a> - Service discovery and location transparency</li>
              </ul>
            </div>

            <div class="feature-card">
              <h3>ğŸ”§ Advanced Features</h3>
              <p>Explore more advanced CORBA.ts capabilities.</p>
              <ul>
                <li><a href="idl-mapping.html">IDL Mapping</a> - Define interfaces with IDL</li>
                <li><a href="value-types.html">Value Types</a> - Complex data structures</li>
                <li><a href="dii.html">Dynamic Invocation</a> - Runtime method calls</li>
              </ul>
            </div>

            <div class="feature-card">
              <h3>ğŸ’» Practical Examples</h3>
              <p>See real-world usage patterns and best practices.</p>
              <ul>
                <li><a href="../examples/client-server.html">Client/Server Patterns</a></li>
                <li><a href="../examples/naming-service.html">Using Naming Service</a></li>
                <li><a href="../examples/advanced.html">Advanced Scenarios</a></li>
              </ul>
            </div>

            <div class="feature-card">
              <h3>ğŸ“– API Reference</h3>
              <p>Detailed documentation for all CORBA.ts APIs.</p>
              <ul>
                <li><a href="../api/orb.html">ORB API</a></li>
                <li><a href="../api/poa.html">POA API</a></li>
                <li><a href="../api/types.html">Types & TypeCodes</a></li>
              </ul>
            </div>
          </div>

          <div class="panel mt-2 text-center">
            <h3>ğŸ‰ Congratulations!</h3>
            <p>
              You've successfully created and run your first CORBA.ts application. You're now ready to build more
              complex distributed systems!
            </p>
            <a href="orb.html" class="btn mt-1">Continue with ORB Guide</a>
          </div>
        </article>
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-bottom">
          <p>&copy; 2024 CORBA.ts. Licensed under the MIT License.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
